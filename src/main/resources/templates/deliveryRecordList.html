<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>入库界面</title>
    <link rel="stylesheet" type="text/css" href="../static/css/bootstrap/bootstrap.css">
    <script src="../static/js/bootstrap/bootstrap.js"></script>
    <script src="../static/js/jquery-3.5.1/jquery-3.5.1.js"></script>
</head>

<body>


<div class="container">


    <!--头部-->
    <h2>
        <div>
            <!-- 导航条右侧内容 -->

            <a th:href="@{/inRecord/in}"><span class="fa fa-heart"></span>&nbsp;入库</a>

            <a th:href="@{/outRecord/out}"><span class="fa fa-file-text"></span>&nbsp;出库</a>

            <a th:href="@{/storageTable/getAll}"><span class="fa fa-cart-plus"></span>&nbsp;库存管理</a>

            <a th:href="@{/borrowRecord/borrow}"><span class="fa fa-cart-plus"></span>&nbsp;借用管理</a>

            <a th:href="@{/deliveryRecord/delivery}"><span class="fa fa-cart-plus"></span>&nbsp;发货管理</a>

        </div>
    </h2>


    <!--           查询页面   新增 -->


    <div class="div3">
        <h3>
            <a th:href="@{/deliveryRecord/delivery}"><span class="fa fa-heart"></span>发货</a>
        </h3>
        <div>
            <form th:action="@{/deliveryRecord/getAll}" id="form1" th:object="${deliveryRecord}" method="get">
                <!--                        -->
                <div class="row">
                    <div class="col-lg-3">
                        <div class="input-group input-group-lg">
                            <span class="input-group-addon">物料号</span>
                            <input type="text" th:field="*{matnr}" class="form-control" placeholder="物料号"
                                   aria-describedby="sizing-addon1">
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="input-group input-group-lg">
                            <span class="input-group-addon">零部件名称</span>
                            <input type="text" th:field="*{partName}" class="form-control" placeholder="零部件名称"
                                   aria-describedby="sizing-addon1">
                        </div>
                    </div><!-- /.col-lg-6 -->
                    <div class="col-lg-3">
                        <div class="input-group input-group-lg">
                            <span class="input-group-addon">零部件规格</span>
                            <input type="text" th:field="*{partSpecification}" class="form-control"
                                   placeholder="零部件规格"
                                   aria-describedby="sizing-addon1">
                        </div>
                    </div><!-- /.col-lg-6 -->
                    <div class="col-lg-3">
                        <div class="input-group input-group-lg">
                            <span class="input-group-addon">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp图号&nbsp&nbsp&nbsp&nbsp</span>
                            <input type="text" th:field="*{figureNumber}" class="form-control" placeholder="图号"
                                   aria-describedby="sizing-addon1">
                        </div>
                    </div><!-- /.col-lg-6 -->

                    <div class="row">
                        <div class="col-lg-3">
                            <div class="input-group input-group-lg">
                                <span class="input-group-addon">&nbsp&nbsp&nbsp&nbsp供货商&nbsp&nbsp&nbsp</span>
                                <input type="text" th:field="*{supplier}" class="form-control" placeholder="供货商"
                                       aria-describedby="sizing-addon1">
                            </div>
                        </div><!-- /.col-lg-6 -->
                        <div class="col-lg-3">
                            <div class="input-group input-group-lg">
                                <!--                            <span class="input-group-addon">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp类别&nbsp&nbsp&nbsp&nbsp</span>-->
                                类别 &nbsp&nbsp&nbsp <select id="category1" th:field="*{category}">
                                <option value=""></option>
                                <option value="外购件">外购件</option>
                                <option value="镜头">镜头</option>
                                <option value="镜片">镜片</option>
                                <option value="镜头机械部分">镜头机械部分</option>
                            </select>
                            </div><!-- /.col-lg-6 -->
                        </div>
<!--                        <div class="col-lg-3">-->
<!--                            <div class="input-group input-group-lg">-->
<!--                                <span class="input-group-addon">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp库位&nbsp&nbsp&nbsp&nbsp</span>-->
<!--                                <input type="text" th:field="*{location}" class="form-control" placeholder="库位"-->
<!--                                       aria-describedby="sizing-addon1">-->
<!--                            </div>-->

<!--                        </div>-->
                        <div class="col-lg-3">
                            <div class="input-group input-group-lg">
                                <span class="input-group-addon">&nbsp&nbsp&nbsp&nbsp创建人&nbsp&nbsp&nbsp</span>
                                <input type="text" th:field="*{createdName}" class="form-control"
                                       placeholder="创建人"
                                       aria-describedby="sizing-addon1">
                            </div>
                        </div><!-- /.col-lg-6 -->
                    </div>

                </div>
                <div class="row">
                    <div class="col-lg-1 offset-5">
                        <button type="submit" value="submit" class="btn btn-info">查询</button>
                    </div>
                </div>
            </form>
        </div>
        <div class="inRecord">
            <table class="table table-hover">
                <thead style="border-bottom: none">
                <tr>
                    <th>序号</th>
                    <th>物料号</th>
                    <th>图号</th>
                    <th>零部件规格</th>
                    <th>零部件名称</th>
                    <th>发货人</th>
                    <th>发货地址</th>
                    <th>收货人</th>
                    <th>收货地址</th>
                    <th>收货人联系电话</th>
                    <th>收货人供货商</th>

                    <th>类别</th>
                    <th>数量</th>
<!--                    <th>库位</th>-->
                    <th>创建人</th>
                    <th>创建时间</th>
                    <th>备注</th>
                    <!--                        <th>操作</th>-->
                </tr>
                </thead>
                <tbody id="pageMain">
                <tr th:if="page != null" th:each="deliveryRecord,deliveryRecordStatus :${page.pageData}">
                    <td th:text="${deliveryRecordStatus.index + 1}"></td>
                    <td th:text="${deliveryRecord.matnr}"></td>
                    <td th:text="${deliveryRecord.figureNumber}"></td>
                    <td th:text="${deliveryRecord.partSpecification}"></td>
                    <td th:text="${deliveryRecord.partName}"></td>
                    <td th:text="${deliveryRecord.deliveryName}"></td>
                    <td th:text="${deliveryRecord.deliveryAddress}"></td>
                    <td th:text="${deliveryRecord.borrowName}"></td>
                    <td th:text="${deliveryRecord.borrowAddress}"></td>
                    <td th:text="${deliveryRecord.telephone}"></td>
                    <td th:text="${deliveryRecord.supplier}"></td>
                    <td th:text="${deliveryRecord.category}"></td>
                    <td th:text="${deliveryRecord.number}"></td>
<!--                    <td th:text="${deliveryRecord.location}"></td>-->
                    <td th:text="${deliveryRecord.createdName}"></td>
                    <td th:text="${deliveryRecord.createdTime}"></td>
                    <td th:text="${deliveryRecord.mark}"></td>  <!-- 需要传递id -->
                </tr>
                </tbody>
            </table>
            <div id="pageBox">
                <span id="prev">上一页</span>
                <ul id="pageNav"></ul>
                <span id="next">下一页</span>
            </div>
        </div>
    </div>


    <!--           查询页面 新增  -->

</div>


</body>

<style>


    body {
        /*background-color: #30cfd0;*/
        text-align: center;
        margin: 0 auto;
    }


    .div3 {
        text-align: center;
        margin-left: 200px;
        /*width: 1000px;*/
        margin: 0 auto;
    }


    .input-group-addon {
        margin-top: 10px;
        width: 100px;
        text-align: center;
    }


    /*     分页 */
    /*设置 a 标签的css样式*/
    .page-normal button {
        border: 1px solid #ff6500;
        padding: 5px 7px;
        color: #ff6500;
        margin-left: 10px; /*设置标签 a 之间的间隔*/
        text-decoration: none; /*去除页码数字下面的下划线*/
    }

    /*设置鼠标经过时 a 标签的css样式*/
    .page-normal button:hover {
        background-color: #120801;
    }

    /*设置整个div的css样式,该样式主要用于设置网页内的省略号 …… 的样式，并且同时设置内容居中显示*/
    .page-normal {
        color: #3070b5;
        text-align: right;
        margin-right: 20px;
    }

    /*设置当前页面的css样式*/
    .page-normal .page-current {
        color: #ffffff;
        background-color: #ff6500;
    }

    /*设置左单括号 < 的css样式*/
    .page-normal .page-prev {
        color: #ffe3c6;
    }

    /*进行代码优化，将不同css样式中共有的属性放在一起，有助于提高运行效率*/
    .page-normal button, .page-normal button:hover, .page-normal .page-prev, .page-normal .page-current {
        border: 1px solid #e3dedb;
        padding: 5px 7px;
    }


    #pageBox {
        padding: 10px 0 0 0;
    }

    #pageBox span {
        display: inline-block;
        width: 60px;
        height: 24px;
        line-height: 24px;
        text-align: center;
        color: #fff;
        background: #08a586;

    }

    #pageNav {
        display: inline-block;
    }

    #pageNav a {
        display: inline-block;
        width: 24px;
        height: 24px;
        line-height: 24px;
        text-align: center;
        color: #3a87ad;
        text-decoration: none;
    }

    #pageNav a.active, #pageNav a:hover {
        background: #3a87ad;
        color: #EFEFEF;
    }

    #prev:hover {
        cursor: pointer;
    }

    #next:hover {
        cursor: pointer;
    }

    .input-group-addon {
        margin-top: 10px;
        margin-right: 5px;
    }

    /*    分页*/

</style>


<script>

    <!-- 分页 -->
    // 开始  分页 内容
    $(function () {
        tabPage({
            pageMain: '#pageMain',
            pageNav: '#pageNav',
            pagePrev: '#prev',
            pageNext: '#next',
            curNum: 20, /*每页显示的条数*/
            activeClass: 'active', /*高亮显示的class*/
            ini: 0/*初始化显示的页面*/
        });

        function tabPage(tabPage) {
            var pageMain = $(tabPage.pageMain);
            /*获取内容列表*/
            var pageNav = $(tabPage.pageNav);
            /*获取分页*/
            var pagePrev = $(tabPage.pagePrev);
            /*上一页*/
            var pageNext = $(tabPage.pageNext);
            /*下一页*/


            var curNum = tabPage.curNum;
            /*每页显示数*/
            var len = Math.ceil(pageMain.find("tr").length / curNum);
            /*计算总页数*/
            console.log(len);
            var pageList = '';
            /*生成页码*/
            var iNum = 0;
            /*当前的索引值*/

            for (var i = 0; i < len; i++) {
                pageList += '<a href="javascript:;">' + (i + 1) + '</a>';
            }
            pageNav.html(pageList);
            /*头一页加高亮显示*/
            pageNav.find("a:first").addClass(tabPage.activeClass);

            /*******标签页的点击事件*******/
            pageNav.find("a").each(function () {
                $(this).click(function () {
                    pageNav.find("a").removeClass(tabPage.activeClass);
                    $(this).addClass(tabPage.activeClass);
                    iNum = $(this).index();
                    $(pageMain).find("tr").hide();
                    for (var i = ($(this).html() - 1) * curNum; i < ($(this).html()) * curNum; i++) {
                        $(pageMain).find("tr").eq(i).show()
                    }

                });
            })

            $(pageMain).find("tr").hide();
            /************首页的显示*********/
            for (var i = 0; i < curNum; i++) {
                $(pageMain).find("tr").eq(i).show()
            }

            /*下一页*/
            pageNext.click(function () {
                $(pageMain).find("tr").hide();
                if (iNum == len - 1) {
                    alert('已经是最后一页');
                    for (var i = (len - 1) * curNum; i < len * curNum; i++) {
                        $(pageMain).find("tr").eq(i).show()
                    }
                    return false;
                } else {
                    pageNav.find("a").removeClass(tabPage.activeClass);
                    iNum++;
                    pageNav.find("a").eq(iNum).addClass(tabPage.activeClass);
//                    ini(iNum);
                }
                for (var i = iNum * curNum; i < (iNum + 1) * curNum; i++) {
                    $(pageMain).find("tr").eq(i).show()
                }
            });

            /*上一页*/
            pagePrev.click(function () {
                $(pageMain).find("tr").hide();
                if (iNum == 0) {
                    alert('当前是第一页');
                    for (var i = 0; i < curNum; i++) {
                        $(pageMain).find("tr").eq(i).show()
                    }
                    return false;
                } else {
                    pageNav.find("a").removeClass(tabPage.activeClass);
                    iNum--;
                    pageNav.find("a").eq(iNum).addClass(tabPage.activeClass);
                }
                for (var i = iNum * curNum; i < (iNum + 1) * curNum; i++) {
                    $(pageMain).find("tr").eq(i).show()
                }
            })
        }
    })

    // 结束
    //分页

    function add() {
        // alert("修改");
        $("#t1").lastChild.append(
        "  <tr> " +
        "  <td ><input></td>   " +
        "  <td ><input></td>    " +
        "  <td ><input></td>  " +
        " <td ><input></td>  " +
        " <td ><input></td>   " +
        " <td><input></td>    " +
        " <td ><input></td>    " +
        "  <td ><input></td>     " +
        "  <td ><input></td>      " +
        "  <td ><input></td>   " +
        "  <td ><input></td>  <!-- 需要传递id -->  " +
        "  <td>  " +
        "  <button class='btn-default' th:onclick=''javascript:add()''>添加</button>  " +
        "  <button class='btn-danger' th:onclick=''javascript:del()''>删除</button>  " +
        "   </td>"
            );

    };


    $(function () {
        $('#matnr').bind('keypress', function (event) {
            if (event.keyCode == "13") {
                var matnr = $("input[name='matnr']").val().trim();
                // 请求数据 自动填写  发动请求
                $.ajax({
                    url: "/inRecord/checkIn",
                    type: "get",
                    data: {
                        matnr: matnr,
                    },
                    //  需要将其余输入框设置成不可编辑状态
                    success: function (res) {
                        console.log(res.code)
                        console.log(res)
                        // 将数据放入input标签
                        if (res.data !== null) {
                            $('#partName').val(res.data.partName).attr("readonly", "readonly");
                            $('#partSpecification').val(res.data.partSpecification).attr("readonly", "readonly");
                            $('#figureNumber').val(res.data.figureNumber).attr("readonly", "readonly");
                            $('#material').val(res.data.material).attr("readonly", "readonly");
                            $('#supplier').val(res.data.supplier).attr("readonly", "readonly");
                            $('#location').val(res.data.location).attr("readonly", "readonly");
                        } else {
                            window.location.reload();
                        }

                    }
                })
                //  结束
            }
        });
    });


    $(document).ready(function () {


        $("#btn").click(function () {
            alert("未知得操作！")
            // var username = $("#username").val();
            // var password = $("#password").val();
            //
            // var error = "";
            // if (username == "") {
            //     error += "用户名不能为空！";
            //     error += "\n";
            // } else if (password == "") {
            //     error += "密码不能为空！";
            //     error += "\n";
            // }
            // if (error != "") {
            //     alert(error);
            // } else {
            //     $.ajax({
            //         type: 'GET',
            //         dataType: 'json',
            //         url: 'http://localhost:8080/addressList/add',
            //         contentType: 'application/json;charset=UTF-8',
            //         data: JSON.stringify({"username": username, "password": password}),
            //         success: function (data1) {//返回结果
            //             if (data1) {
            //                 window.location.href = "success.html?userName=" + username;
            //                 //data.username
            //             } else {
            //                 //debugger;
            //                 alert("用户名或密码错误");
            //             }
            //         }
            //     });
            // }
        });
    })

</script>

</html>